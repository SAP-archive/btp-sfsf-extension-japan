<mvc:View xmlns="sap.ui.table" 
    xmlns:dnd="sap.ui.core.dnd" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:c="sap.ui.core" 
    xmlns:m="sap.m" 
    xmlns:fb="sap.ui.comp.filterbar" 
    xmlns:f="sap.f" 
    xmlns:l="sap.ui.layout"
    xmlns:v="sap.ui.comp.variants" 
    controllerName="com.sap.sfsf.applicants.controller.Controller" 
    height="100%">
	<m:App>
    	<m:pages>
			<m:Page title="{i18n>title}{/jpconfig}" showHeader="true" enableScrolling="true" titleAlignment="Center" id="CandidatesList">
				<m:content>
					<l:Splitter>
						<m:VBox id="applicantsListBox" justifyContent="Start" width="100%">
							<m:layoutData>
								<l:SplitterLayoutData id="left" size="50%" resizable="true"/>
							</m:layoutData>
							<fb:FilterBar header="{i18n>applicationList}" reset="onLeftReset" search="onLeftGoBtn" showRestoreButton="true" showClearButton="true" showGoOnFB="true" showClearOnFB="true" clear="onLeftReset" showFilterConfiguration="true">
								<fb:filterGroupItems>
									<fb:FilterGroupItem groupName="Group1" name="A" label="{i18n>company}" labelTooltip="Tooltip Example" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="false">
										<fb:control>
											<m:Select id="slCompany" forceSelection="true" items="{ path: '/company' }" showSecondaryValues="true" change="onSlCurrentCompanyChange" busy="{view>/companyBusy}">
												<c:ListItem key="{externalCode}" text="{name}" additionalText="{externalCode}"/>
											</m:Select>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="B" label="{i18n>businessunit}" labelTooltip="Tooltip Example" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="false">
										<fb:control>
											<m:Select id="slBusinessunit" forceSelection="true" items="{ path: '/currentBusinessunit' }" showSecondaryValues="true" change="onSlCurrentBusinessUnitChange" busy="{view>/businessunitBusy}">
												<c:ListItem key="{externalCode}" text="{name}" additionalText="{externalCode}"/>
											</m:Select>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="C" label="{i18n>division}" labelTooltip="Tooltip Example" mandatory="true" partOfCurrentVariant="true" visibleInFilterBar="true">
										<fb:control>
											<m:Select id="slDivision" forceSelection="true" items="{ path: '/currentDivision' }" showSecondaryValues="true" change="onSlCurrentDivisionChange" busy="{view>/divisionBusy}">
												<c:ListItem key="{externalCode}" text="{name}" additionalText="{externalCode}"/>
											</m:Select>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="D" label="{i18n>department}" labelTooltip="Tooltip Example" mandatory="true" partOfCurrentVariant="true" visibleInFilterBar="true">
										<fb:control>
											<m:Select id="slDepartment" forceSelection="true" items="{ path: '/currentDepartment' }" showSecondaryValues="true" change="onSlCurrentDepartmentChange" busy="{view>/departmentBusy}">
												<c:ListItem key="{externalCode}" text="{name}" additionalText="{externalCode}"/>
											</m:Select>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="E" label="{i18n>position}" labelTooltip="Tooltip Example" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="true">
										<fb:control>
											<m:Select id="slPosition" forceSelection="true" items="{ path: '/currentPosition' }" showSecondaryValues="true" busy="{view>/positionBusy}">
												<c:ListItem key="{code}" text="{name}" additionalText="{code}"/>
											</m:Select>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="G" label="{i18n>jobTenure}{i18n&gt;jobTenureLL}" labelTooltip="Tooltip Example" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="false">
										<fb:control>
											<m:Input id="slJobTenureLL" type="Number" class="sapUiSmallMarginBottom" width="4rem"/>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="H" label="{i18n>jobTenure}{i18n&gt;jobTenureUL}" labelTooltip="Tooltip Example" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="false">
										<fb:control>
											<m:Input id="slJobTenureUL" type="Number" class="sapUiSmallMarginBottom" width="4rem"/>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="I" label="{i18n>willingness}" labelTooltip="Tooltip Example" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="false">
										<fb:control>
											<m:Select id="slWillingness" forceSelection="true">
												<c:Item key="{key}" text="-"/>
												<c:Item key="{key}" text="yes"/>
												<c:Item key="{key}" text="no"/>
											</m:Select>
										</fb:control>
									</fb:FilterGroupItem>
									<fb:FilterGroupItem groupName="Group1" name="J" label="{i18n>transferFlag}" labelTooltip="Tooltip Example" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="false">
										<fb:control>
											<m:Select id="slTransferFlag" forceSelection="true">
												<c:Item key="{key}" text="ALL"/>
												<c:Item key="{key}" text="-"/>
												<c:ListItem key="{key}" icon="sap-icon://accept"/>
											</m:Select>
										</fb:control>
									</fb:FilterGroupItem>
								</fb:filterGroupItems>
							</fb:FilterBar>                    					
							<m:OverflowToolbar>
								<m:Label text = "{i18n>assigned} {/noTransferflagCount} / {i18n>allApplicants} {/applicantsCount}"/>
								<m:ProgressIndicator id="leftProgressIndicator" width="20%" class="sapUiSmallMarginBottom" percentValue="30" showValue="true" state="None" />
								<m:ToolbarSpacer/>	
								<m:Button id="dataLeftExport" type="Default" press="onDataLeftExport" text="{i18n>dataExport}"/>
								<m:MenuButton text="{i18n>transferDestinationPosition}">
									<m:menu>
										<m:Menu>
											<m:MenuItem text="{i18n>openNextPositionPane}" press="onOpenNextPositionPane" />
											<m:MenuItem text="{i18n>openEditExistingCasePane}" press="onOpenEditExistingCasePane" />
										</m:Menu>
									</m:menu>
								</m:MenuButton>
							</m:OverflowToolbar>
							<Table id="applicantListTable" selectionMode="MultiToggle" ariaLabelledBy="title" rows="{         path: '/candidates/'        }" visibleRowCount="13" rowHeight="30">
							<columns>
							<Column width="2rem">
								<template>
									<m:Image src="{photo}" width="2rem" alt="photo" tooltip="{i18n>photo}" press="onClickImage"/>
								</template>
							</Column>

							<Column width="6rem" sortProperty="currentEmpName">
								<m:Label text="{i18n>name}"/>
								<template>
									<m:Text text="{currentEmpName}" wrapping="false"/>
								</template>
							</Column>
							<Column width="6rem" sortProperty="transferFlag" hAlign="Center">
								<m:Label text="{i18n>transferFlag}"/>
									<template>
										<c:Icon src="{
											path: 'transferFlag',
											formatter: '.formatAvailableToIcon'
										}"/>
									</template>
							</Column>
							<Column width="11rem" sortProperty="currentDivisionName">
								<m:Label text="{i18n>division}"/>
								<template>
									<m:Text text="{currentDivisionName}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="11rem" sortProperty="currentDepartmentName">
								<m:Label text="{i18n>department}"/>
								<template>
									<m:Text text="{currentDepartmentName}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="11rem" sortProperty="currentPositionName">
								<m:Label text="{i18n>position}"/>
								<template>
									<m:Text text="{currentPositionName}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="6rem" sortProperty="jobTenure">
								<m:Label text="{i18n>jobTenure}"/>
								<template>
									<m:Text text="{jobTenure}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="6rem" sortProperty="currentJobGrade">
								<m:Label text="{i18n>level}"/>
								<template>
									<m:Text text="{currentJobGrade}" wrapping="false"/>
								</template>
							</Column>
							<Column width="6rem" sortProperty="willingness">
								<m:Label text="{i18n>willingness}"/>
								<template>
									<m:Text text="{willingness}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="6rem" sortProperty="ratingTypeName">
								<m:Label text="{i18n>latestevaluation}"/>
								<template>
									<m:Text text="{rating1}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="6rem" sortProperty="ratingTypeName">
								<m:Label text="{i18n>previousevaluation}"/>
								<template>
									<m:Text text="{rating2}" wrapping="false"/>
								</template>
							</Column>
							<Column width="6rem" sortProperty="currentEmpRetire">
								<m:Label text="{i18n>retirementplan}"/>
								<template>
									<m:Text text="{currentEmpRetire}" wrapping="false"/>
								</template>
							</Column>
							</columns>
							<dragDropConfig>
								<dnd:DragInfo groupName="moveToPositionListTable" sourceAggregation="rows" dragStart="onDragStart"/>
								<dnd:DropInfo groupName="moveToApplicantListTable" drop="onDropApplicantListTable"/>
							</dragDropConfig>
						</Table>
						</m:VBox>
						<m:VBox id="nextPositionListBox" justifyContent="End" width="100%">
							<m:layoutData>
								<l:SplitterLayoutData id="right" size="50%" resizable="true"/>
                            </m:layoutData>
							 <c:Fragment fragmentName="com.sap.sfsf.applicants.view.CreateFilterBar" type="XML" />       					
							<m:OverflowToolbar id="otb1">
								<m:Label text = "{i18n>allocated} {/availabilityCount} / {i18n>allPosition} {/nextpostionsCount}"/>
								<m:ProgressIndicator id="rightProgressIndicator" width="20%" class="sapUiSmallMarginBottom" percentValue="30"  showValue="true" state="None" />

								<m:ToolbarSpacer/>
								<m:Button id="cancel" type="Default" text="{i18n>cancel}" press="onCancelBtn" />
								<m:Button id="deleteCandidatePlanBtn" type="Default" text="{i18n>deleteCandidatePlanBtn}" press="onDeleteCandidatePlanBtn" visible="false" enabled="false" />
								<m:Button id="dataRightExport" type="Default" text="{i18n>dataExport}" press="onDataRightExport" />
								<m:Button type="Default" text="{i18n>save}" press="onSave"/>
								<m:Button type="Default" text="{i18n>hide}" press="onHideRight"/>
							</m:OverflowToolbar>
							<Table id="positionListTable" selectionMode="None" ariaLabelledBy="title2" rows="{         path: '/nextpositions/'        }" visibleRowCount="13" rowHeight="30">
							<columns>
							<Column width="6rem" sortProperty="candidateName">
								<m:Label text="{i18n>name}"/>
								<template>
									<m:Text text="{candidateName}" wrapping="false"/>
								</template>
							</Column>
							<Column width="11rem" sortProperty="nextDivision">
								<m:Label text="{i18n>division}"/>
								<template>
									<m:Text text="{nextDivisionName}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="11rem" sortProperty="nextDepartment">
								<m:Label text="{i18n>department}"/>
								<template>
									<m:Text text="{nextDepartmentName}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="11rem" sortProperty="nextPosition">
								<m:Label text="{i18n>position}"/>
								<template>
									<!--<m:Text text="{nextPositionName}" wrapping="false"/>-->
									<m:Link id="positionName" text="{nextPositionName}" press="mentionDuplicate"/>
								</template>
							</Column>	
							<Column width="6rem" sortProperty="currentEmpName">
								<m:Label text="{i18n>currentemployee}"/>
								<template>
									<m:Text text="{currentEmpName}" wrapping="false"/>
								</template>
							</Column>	
							<Column width="6rem" sortProperty="nextJobGrade">
								<m:Label text="{i18n>level}"/>
								<template>
									<m:Text text="{nextJobGrade}" wrapping="false"/>
								</template>
							</Column>
							<Column width="6rem" sortProperty="currentEmpRetire">
								<m:Label text="{i18n>retirementplan}"/>
								<template>
									<m:Text text="{currentEmpRetire}" wrapping="false"/>
								</template>
							</Column>	
							</columns>
							<dragDropConfig>
								<dnd:DragInfo groupName="moveToApplicantListTable" sourceAggregation="rows" dragStart="onDragStart"/>
								<dnd:DropInfo groupName="moveToPositionListTable" targetAggregation="rows" dropPosition="On" drop="onDropPositionListTable"/>
							</dragDropConfig>
						</Table>
						</m:VBox>
					</l:Splitter>
				</m:content>
			</m:Page>
    	</m:pages>
    </m:App>
</mvc:View>